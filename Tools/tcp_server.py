import socket , sys
serversocket=socket.socket(socket.AF_INET, socket.SOCK_STREAM)


#define our target 

if len(sys.argv)==3:
    serversocket.bind((sys.argv[1], int(sys.argv[2])))
    serversocket.listen(3)
else:
    print("Invalid amount of arguments.")
    print("Syntax: python3 tcp_server.py <ip> <port>")
print(f"[*] Listening on {sys.argv[1]}:{sys.argv[2]}")



while True:
    
    client,address=serversocket.accept()
    request=client.recv(1024)
    print("[*] Accepted connection from: {address[0]}:{address[1]}")
    print(f"[*] Received: {request}")    
    
    message= f'Local Server{sys.argv[1]}:{sys.argv[2]} '
    #send back a packet
    client.send(message.encode('ascii'))
    client.close()
    

